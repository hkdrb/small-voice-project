# ユーザー登録時の「Email already exists」エラー修正計画

## 問題の概要
本番環境にて、ユーザー登録時にどのアドレスを入力しても `Email already exists` エラーが発生するとの報告がありました。
調査の結果、フロントエンドの「作成」ボタンに**重複送信（ダブルサブミット）防止機能**が実装されていないことが判明しました。

### 発生メカニズム
1. ユーザーが「作成」ボタンをクリックする。
2. サーバー側でユーザー登録処理が開始される。これには同期的なメール送信処理が含まれ、数秒かかる場合がある。
3. この待機時間中、ボタンが有効なままのため、ユーザーが（反応がないと思い、あるいは誤って）再度クリックしてしまう。
4. 1回目のリクエストは正常に完了し、データベースにユーザーが登録される。
5. 2回目のリクエストが処理される際、すでに1回目で登録されたユーザーが存在するため、`Email already exists` エラーが発生する。
6. フロントエンドには最後に発生したエラー（2回目の結果）がアラートとして表示される。

## 変更内容

### Frontend
**`frontend/src/components/admin/UserManager.tsx`**

- `isSubmitting` ステートを追加し、送信処理中は `true` に設定する。
- 「作成」ボタンおよび「保存」ボタンに `disabled={isSubmitting}` を適用し、処理中の連打を防止する。
- ボタンラベルを処理中（例: "送信中..."）に変更し、ユーザーにフィードバックを与える。

## 検証計画

### マニュアル検証
1. 管理画面のユーザー管理タブを開く。
2. 「新規作成」をクリックしてフォームを開く。
3. 適当なメールアドレスと名前を入力して「作成」ボタンをクリックする。
4. ボタンが即座に無効化（グレーアウト）され、再び押せなくなることを確認する。
5. 処理完了後、正常にユーザーが追加され、エラーが表示されないことを確認する。

### 注意事項
- この修正により、ネットワーク遅延やメール送信遅延時でも、ユーザーが誤って複数回登録操作を行うことを防げます。
